# 测试点
* √ 代表已测试
* o 代表已检查

## spring-server

### api
#### api-model
api service
entity √
converter

### base
#### netty-socket
* 校验参数
#### oss-service √
* 上传 √
* 下载 √
* 删除 √
* 获取url √
* 获取文件信息 √
#### search-service

### business
#### auth-service
* 生成token
* 校验token
  * token有效但是过期
  * token无效
#### message-service
* mapper
  * es存储
  * mongo存储
  * mysql存储
* service
  * 存储用户最近聊天记录到redis：o
  * 获取用户最近聊天记录：o
    * 只存储在redis，没有也不查询数据库
  * 查询用户与全部好友会话信息
    * 获取文本消息：o
    * 获取图片消息：o
  * 查询用户与某个好友的某个时间节点的历史消息信息
  * senderAccount用户的全部keyword聊天记录
  * senderAccount和receiverAccount的全部keyword聊天记录
* handler
  * 连接handler
    * 连接服务
    * 断开服务
  * 聊天handler
    * 发送text消息：o
    * 发送image消息：o
    * 发送站内资源消息
    * 消息缓存在redis
  * 给服务器的handler
    * 心跳请求
    * 已读消息
#### post-service
* Post
  * 发布：o
    * 第一次http文本存储：o
    * 第二次http oss存储：o
    * 成功/失败的netty响应：o
  * 删除：o
  * 修改：o
    * 只修改内容：o
    * 修改内容 + 文件：o
      * 第一次http文本存储：o
      * 第二次http oss存储：o
      * 成功/失败的netty响应：o
  * 获取帖子List概览信息：o
    * PostInfoList（包含fileId）：o
    * oss服务获取fileUrls：o
  * 获取帖子详情：o
    * 第一次http：o
      * 获取postInfo：o
      * 获取postFileIds：o
      * 获取post一级comment：o
    * 第二次http:获取postFiles；同上oss服务获取fileUrls：o
    * 后续http:获取post的二级comment：o
* netty的帖子：
  * 点赞：o
  * 评论：o
  * 收藏：o
  * 创建收藏夹：o
  * 转发：o
  * Todo:netty响应待重构
#### recommend-service
* 获取热门列表
* 获取好友的帖子
* 获取关注者的帖子
#### relationship-service
* netty相关重构到此service：o
* 申请添加好友
* 取消申请
* 同意添加好友
* 拒绝添加好友
* 删除好友
* 搜索好友：o
  * 通过account + like模糊搜索好友：o
* 获取与我相关的全部好友申请：o
  * 添加我的：o
  * 我添加的：o
  * 添加好友的未处理消息数量：o
* 我的好友列表：o
* 通过name + es搜索账号：o
#### sms-service
* 发送短信 √
* 验证短信 √
#### user-service
* 手机号注册 √
* 密码注册 √
* 手机号登录 √
* 密码登录 √
* 获取验证码 √
* 修改密码 √
* 通过account + mysql搜索账号 √
* 通过name + es搜索账号 √
* dubbo远程调用获取用户信息 √

### gateway
#### gateways
* service
  * ip限流 √
  * token校验 √
  * accessToken和refreshToken的生成和刷新：o
* network
  * 服务lb发现转发 √
#### nginx

### utils
#### springMvcUtils
* Redis Utils

#### JMeter 压测

#### 分布式
1. 分布式锁测试
2. Dubbo同步调用具体哪个实例执行测试
3. Mq各种模式以及在分布式情况下怎么同步消息？幂等？分布式锁？均衡负载？

#### 存储重构
1. 直接增删改查数据库 -> 缓存系统：增删改查缓存；同步数据库 ？ [Todo 学习业务场景题目，不然都不知道怎么系统地设计]
  * 点赞、收藏、评论


#### 剩余待完善
1. 推荐postList
2. 关注着的postList
3. 搜索引擎
4. 数据库锁：虽然单体有对数据库上sync锁，但是集群情况下需要数据库上锁